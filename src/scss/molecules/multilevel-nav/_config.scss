////
/// @author Stefanie Stalder
/// @group Molecules - Navigation
/// @since 0.1.0
////

// Multilevel Desktop-Mobile Nav
//
// A Combination of mobile/desktop navigation. Creates a dropdown top on mobile devices inlcuding multiple submenus
// Shows a full screen menu overlay on mobile devices
//
// Markup: multilevel-nav.html
//
// Style guide: molecules.multilevel-nav

// CONFIG/Variables
// general
$navigation-font-size: rem-calc(18);
$nav-background-item-active: $color-primary;
$nav-text-color-active: $color-text-secondary;
$nav-menu-icon-size: rem-calc(38);
$nav-height: auto;
$nav-line-height: 1.3;

// TOP NAV
$top-nav-background-color: $color-background;
$top-nav-text-color: $color-text;
$top-nav-item-padding-vertical: rem-calc(10);
$top-nav-list-padding: rem-calc(10 5);
$top-nav-item-spacing: rem-calc(40); // margin-left of menu items
$top-nav-item-link-padding: $top-nav-item-padding-vertical;
$top-nav-border: 1px solid $color-lines;

// Sub Navs
$sub-nav-first-background-color: $color-background-secondary;
$sub-nav-other-background-color: $darken;
$sub-nav-text-color: $color-text;
$sub-nav-item-padding-vertical: $top-nav-item-padding-vertical;
$sub-nav-list-padding: $top-nav-list-padding;
$sub-nav-item-link-padding: $top-nav-item-link-padding;
$subnav-border: 1px solid $color-lines;


// STYLES/definitions
@mixin multilevel-nav (
$nav-wrapper-class: '.navigation-container',
$top-nav-list-class: '.nav-list',
$sub-nav-list-class: '.sub-nav-list', // needs arrow icon or sth on mobile
$nav-item: '.menu-item',
$toggle-icon-class: '.icon-menu',
$active: '.current-menu-item',
$mobile-slide-direction: 'left', // states, where nav slides in on open/navigating
$color-bg-top: $top-nav-background-color,
$color-bg-sub: $sub-nav-first-background-color,
$color-text-top: $top-nav-text-color,
$color-text-sub: $color-text-top,
$font-size: $navigation-font-size,
$active-bg: $nav-background-item-active,
$active-text: $nav-text-color-active,
$height: $nav-height,
$line-height: $nav-line-height
) {
  #{$nav-wrapper-class} {
    position: relative;
    width: 100%;
    height: 100vh;
    line-height: $line-height;

    @include susy-media(go-desktop) {
      height: auto;
    }

    /////////////////////////// General properties
    ul {
      // position: fixed;
      top: 0;
      width: 100%;
      list-style: none;

      li,
      li a {
        display: block;
        width: 100%;
        margin: 0;

        @include susy-media(go-desktop) {
          display: inline-block;
          width: auto;
        }
      }

      li a:hover,
      li#{$active} > a {
        background-color: $active-bg;
        color: $active-text;
        text-decoration: none;
      }


      li#{$active} > #{$sub-nav-list-class} {
        display: block;
        left: 0;

        ul {
          margin-top: 0;
        }
      }

      @include susy-media(go-desktop) {
        li {
          margin-left: -5px; // fix
        }

        li:hover > #{$sub-nav-list-class} {
          display: block;
          left: 0;
        }
      }
    }

    #{$toggle-icon-class} {
      appearance: none;
      width: $nav-menu-icon-size;
      height: $nav-menu-icon-size;
      background-position: center center;
      background-size: $nav-menu-icon-size;

      @include susy-media(go-desktop) {
        display: none;
      }

      &:focus {
        outline: none;
      }

      &:checked ~ nav #{$top-nav-list-class} {
        display: block;
        animation: fade-in-left .25s;
      }
    }

  }

  ////////////////////////// Top nav properties
  #{$top-nav-list-class} {
    display: none;
    padding: $top-nav-list-padding;
    background-color: $color-bg-top;

    #{$nav-item} {
      border-bottom: $top-nav-border;

      a {
        padding: $top-nav-item-link-padding;
        color: $color-text-top;
        font-size: $font-size;
      }
    }

    @include susy-media(go-desktop) {
      padding: 0;
      height: $height;
      display: block;

      #{$nav-item} {
        border: 0;
      }
    }
  }

  ///////////////////////////sub nav properties
  #{$sub-nav-list-class} {
    display: none;
    position: absolute;
    top: 0;
    height: calc(100% - #{$nav-menu-icon-size});
    margin-top: $nav-menu-icon-size;
    padding: 0;
    transition: all .25s ease-out;
    background-color: $color-bg-sub;
    color: $color-text-sub;

    z-index: 10;

    @if ($mobile-slide-direction == 'left') {
      left: -120%;
    }

    #{$nav-item} {
      border-bottom: $subnav-border;

      a {
        padding: $sub-nav-item-link-padding;
        color: $color-text-top;
        font-size: $font-size;
      }
    }

    @include susy-media(go-desktop) {
      height: $height;
      padding: 0;
      margin-top: $font-size * $line-height + $top-nav-item-padding-vertical * 2;
      border-top: $subnav-border;

      #{$nav-item} {
        border: 0;
      }
    }
  }
}


///////////////////////////// ANIMATION
@keyframes fade-in-left {
  from {
    transform: translateX(-120%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes fade-in-top {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
